version: 2

project_name: 'kafka-pulse-go-franz'

# Environment variables for version templating  
env:
  - VERSION_CLEAN={{ if .Env.RELEASE_VERSION }}{{ .Env.RELEASE_VERSION }}{{ else }}{{ .Version }}{{ end }}

builds:
  - skip: true

archives:
  - id: source-archive
    name_template: '{{ .ProjectName }}-{{ .Env.VERSION_CLEAN }}-source'
    files:
      - adapter/franz/go.mod
      - adapter/franz/go.sum
      - LICENSE
      - 'adapter/franz/*.go'
      - 'adapter/franz/**/*.go'
      - adapter/franz/README.md
      - adapter/franz/CHANGELOG.md
      # Exclude test files and dist
      - '!adapter/franz/**/*_test.go'
      - '!adapter/franz/dist/**/*'

checksum:
  name_template: '{{ .ProjectName }}-{{ .Env.VERSION_CLEAN }}-checksums.txt'

source:
  enabled: true
  name_template: '{{ .ProjectName }}-{{ .Env.VERSION_CLEAN }}-full-source'

dist: adapter/franz/dist

changelog:
  disable: true

release:
  github:
    owner: vmyroslav
    name: kafka-pulse-go

  name_template: 'Franz-go Adapter v{{ .Env.VERSION_CLEAN }}'

  header: |
    This release contains updates to the Franz-go adapter.

    ### Installation
    ```bash
    go get github.com/vmyroslav/kafka-pulse-go/adapter/franz@{{ .Tag }}
    ```

  footer: |
    {{ .Env.RELEASE_NOTES_CONTENT }}